---
- name: create {{ rhdm_central_data }} directory
  file:
    path: "{{ rhdm_central_data }}"
    state: directory

- name: create {{ kie_maven_settings_custom }}
  template:
    src: settings.xml.j2
    dest: "{{ kie_maven_settings_custom }}"

- name: create setup.cli
  template:
    src: setup.cli.j2
    dest: "{{ rhdm_central_temp }}/setup.cli"

- name: run setup.cli JBoss configuration
  command: "{{ rhdm_central_home }}/bin/jboss-cli.sh --file={{ rhdm_central_temp }}/setup.cli"

- name: create git-hook directory {{ org_uberfire_nio_git_hooks }}
  file:
    path: "{{ org_uberfire_nio_git_hooks }}"
    state: directory

- name: create git-hook post-commit {{ org_uberfire_nio_git_hooks }}/post-commit
  template:
    src: post-commit.j2
    dest: "{{ org_uberfire_nio_git_hooks }}/post-commit"
    mode: +x
